doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    style.
      #map {
        height: 500px;
        width: 100%;
      }
      #casaMarker {
      height: auto;
      width: auto;
      }
      #casaTitle {
      line-height: 12px;
      }
      #casaAddress {
      line-height: 5px;
      }
      #casaLink {
      color: #c69670;
      font-weight: bold;
      line-height: 1px;
      text-decoration: underline;
      }
      #casaArrow {
      color: #c69670;
      }
  body
    #map
    script(async='async', defer='defer').
      function initMap() {
      // center the map
      var map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: 27.899, lng: -82.515 },
      zoom: 12
      });
      // choose map marker icon
      var icon = {
      url: "http://brainstorm.solutions/dahl/wp-content/uploads/2017/07/house-icon-black.png",
      scaledSize: new google.maps.Size(50, 50),
      };
      var currWindow = false;
      // create event listener and message after click markers
      function attachSecretMessage(marker, secretMessage) {
      var infowindow = new google.maps.InfoWindow({
      content: secretMessage
      });
      // listen for click event
      marker.addListener('click', function () {
      infowindow.open(marker.get('map'), marker);
      });
      google.maps.event.addListener(marker, 'click', function () {
      if (currWindow) {
      currWindow.close();
      }
      currWindow = infowindow;
      infowindow.open(base.map, marker);
      });
      }
      // create array of messages of addresses for each marker
      var secretMessages = ['<div id="casaMarker"><h3 id="casaTitle">Villa Estrella </h3><p id="casaAddress">2801 W Estrella St </p><a id="casaLink" href="http://brainstorm.solutions/dahl/property/villa-estrella/">Go to Property Details</a><span id="casaArrow"> &#9654;</span></div>', '<div id="casaMarker"><h3 id="casaTitle">Casa Juanita </h3><p id="casaAddress">6806 S Juanita St </p><a id="casaLink" href="http://brainstorm.solutions/dahl/property/casa-juanita/">Go to Property Details</a><span id="casaArrow"> &#9654;</span></div>', '<div id="casaMarker"><h3 id="casaTitle">Casa Luna </h3><p id="casaAddress">2904 W Estrella St </p><a id="casaLink" href="http://brainstorm.solutions/dahl/property/casa-luna/">Go to Property Details</a><span id="casaArrow"> &#9654;</span></div>', '<div id="casaMarker"><h3 id="casaTitle">Casa Feliz </h3><p id="casaAddress">3006 W Estrella St </p><a id="casaLink" href="http://brainstorm.solutions/dahl/property/casa-feliz/">Go to Property Details</a><span id="casaArrow"> &#9654;</span></div>', '<div id="casaMarker"><h3 id="casaTitle">Casa Bella </h3><p id="casaAddress">6824 S Sparkman St </p><a id="casaLink" href="http://brainstorm.solutions/dahl/property/casa-bella/">Go to Property Details</a><span id="casaArrow"> &#9654;</span></div>'];
      // create markers for each property listing
      var estrella = new google.maps.Marker({
      position: new google.maps.LatLng(27.928814, -82.489407),
      map: map,
      icon: icon
      });
      attachSecretMessage(estrella, secretMessages[0]);
      var juanita = new google.maps.Marker({
      position: new google.maps.LatLng(27.868068, -82.529975),
      map: map,
      icon: icon
      });
      attachSecretMessage(juanita, secretMessages[1]);
      var luna = new google.maps.Marker({
      position: new google.maps.LatLng(27.928471, -82.491106),
      map: map,
      icon: icon
      });
      attachSecretMessage(luna, secretMessages[2]);
      var feliz = new google.maps.Marker({
      position: new google.maps.LatLng(27.928510, -82.492345),
      map: map,
      icon: icon
      });
      attachSecretMessage(feliz, secretMessages[3]);
      var bella = new google.maps.Marker({
      position: new google.maps.LatLng(27.866954, -82.524223),
      map: map,
      icon: icon
      });
      attachSecretMessage(bella, secretMessages[4]);
      }
    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyB10zmH7mgF_T2paATNh92XpkwkVwP-WQs&callback=initMap', async='async', defer='defer')
